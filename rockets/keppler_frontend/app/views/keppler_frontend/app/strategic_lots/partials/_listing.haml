= render 'keppler_frontend/app/frontend/components/navbar', farm: @farm, farms: @farms
.app_wrapper
  .container_custom
    .float-left
      -# = render 'keppler_frontend/app/cattle/partials/search', farm: farm, search: search
    .d-flex.justify-content-end.mb-5
      // .toolbar
      //   %a{ href: '' }
      //     %i.icofont-trash
      //   %a{ href: '' }
      //     %i.icofont-refresh
      //   %a{ href: '' }
      //     %i.icofont-download
      .toolbar
        -# - if can?(KepplerFarm::StrategicLot).destroy_multiple?
          .toolbar-item
            .item-check
              .checkbox
                %label{ for: 'checkbox-all' }
                  %input{ type: 'checkbox', id: 'checkbox-all', '@click': 'selectAll()', name: 'multiple_ids' }
                  %span.cr
                    %i.cr-icon.icofont-check
        
        -# .toolbar-item
          -# = link_to reload_admin_farm_farm_strategic_lots_path(@farm), class: 'tool-btn', remote: true, title: t('keppler.actions.reload_page') do
            %i.icofont-refresh
        -# - if can?(KepplerFarm::StrategicLot).download?
          %li.toolbar-item.dropdown
            %a.dropdown-toggle{ 'data-toggle': 'dropdown', href: '#', title: t('keppler.actions.download_records') }
              %i.icon-cloud-download
            %ul.dropdown-menu
              %li= link_to t('keppler.actions.download.csv'), admin_farm_farm_strategic_lots_path(@farm, format: :csv), class: 'tool-btn'
              %li= link_to t('keppler.actions.download.xls'), admin_farm_farm_strategic_lots_path(@farm, format: :xls), class: 'tool-btn'
        -# - if can?(KepplerFarm::StrategicLot).upload?
          .toolbar-item
            = link_to '#', class: 'tool-btn', title: t('keppler.actions.upload_records'), id: 'upload' do
              %i.icon-cloud-upload
        .toolbar-item
          -# %a.tool-btn{ 'data-confirm': t('keppler.messages.data_confirm'), 'data-method': 'delete', 'v-bind:href': 'link', rel: 'nofollow', ':class': '{disabled: !checks}' }
          = link_to app_farm_strategic_lot_destroy_multiple_path(@farm), method: :delete, class: 'destroy_multiple' do
            %i.icofont-trash
            Eliminar
    %a.float-right.mt-4.mb-4{ href: app_farm_strategic_lot_new_path(farm) }
      %button.btn.btn_custom.btn--filled.btn--medium
        %i.icofont-plus
        Agregar
    - if strategic_lots.blank? && @farm.strategic_lots.count > 0
      = link_to 'Mostrar todos', app_farm_strategic_lots_path(farm)
    %table
      - if strategic_lots.size.zero?
        %thead
          %tr
            %th.not-records.center
              %center No se encontraron lotes estratégicos
      - else
        %thead
          %tr
            %th
              - if can?(KepplerFarm::StrategicLot).destroy_multiple?
                .toolbar-item
                  .item-check
                    .checkbox
                      %label{ for: 'checkbox-all' }
                        %input{ type: 'checkbox', id: 'checkbox-all', '@click': 'selectAll()', name: 'multiple_ids' }
                        %span.cr
                          %i.cr-icon.icofont-check
            %th Lote estratégico
            %th Función
            %th Cantidad de series
            -# %th Controles
        %tbody
          - strategic_lots.each do |strategic_lot|
            %tr{ style: "border-bottom: 1px #eee solid;" }
              - if can?(KepplerFarm::StrategicLot).destroy_multiple?
                %td
                  .checkbox{ style: 'margin: 3px' }
                    %label{ for: "checkbox-#{strategic_lot.id}" }
                      %input{ type:"checkbox", id: "checkbox-#{strategic_lot.id}", 'checklist-model' => 'check', 'checklist-value' => "#{strategic_lot.id}", '@click' => "listDelete(#{strategic_lot.id})"}
                      %span.cr
                        %i.cr-icon.icofont-check
              %td
                = link_to({action: :show, farm_id: farm.id, strategic_lot_id: strategic_lot.id}) do
                  = strategic_lot&.name
              %td
                = link_to({action: :show, farm_id: farm.id, strategic_lot_id: strategic_lot.id}) do
                  .badge.badge-secondary= strategic_lot&.function
              %td
                = link_to({action: :show, farm_id: farm.id, strategic_lot_id: strategic_lot.id}) do
                  = strategic_lot&.cows&.count
              -# %td.actions
                = link_to app_farm_strategic_lot_path(farm, strategic_lot), class: 'floating-btn' do
                  %span.icofont-eye
                = link_to app_farm_strategic_lot_edit_path(farm, strategic_lot), class: 'floating-btn' do
                  %span.icofont-ui-edit
                = link_to app_farm_strategic_lot_destroy_path(farm, strategic_lot), class: 'floating-btn' do
                  %span.icofont-trash
    -# - else
    -#   .row{ style: 'margin-top: 10px' }
    -#     - strategic_lots.each do |strategic_lot|
    -#       .col-md-4
    -#         .card_lot
    -#           .box-header.with-border
    -#             .row
    -#               .float-left{ style: 'display: flex' }
    -#                 - if can?(KepplerFarm::StrategicLot).destroy_multiple?
    -#                   .checkbox{ style: 'margin: 3px' }
    -#                     %label{ for: "checkbox-#{strategic_lot.id}" }
    -#                       %input{ type:"checkbox", id: "checkbox-#{strategic_lot.id}", 'checklist-model' => 'check', 'checklist-value' => "#{strategic_lot.id}", '@click' => "listDelete(#{strategic_lot.id})"}
    -#                       %span.cr
    -#                         %i.cr-icon.icofont-check
    -#               %h1
    -#                 %small= strategic_lot&.name
    -#               .float-right{ style: 'margin-left: auto;' }
    -#                 .item-toolbar
    -#                   .item
    -#                     .badge.badge-secondary= strategic_lot&.function
    -#                   .item
    -#                     = link_to({action: :show, farm_id: @farm.id, strategic_lot_id: strategic_lot.id, format: :pdf}, {title: 'Reporte', target: '_blank'}) do
    -#                       %i.icofont-print
    -#                   .item
    -#                     = link_to({action: :edit, farm_id: @farm.id, strategic_lot_id: strategic_lot.id}, {title: 'Editar'}) do
    -#                       %i.icofont-pencil-alt-5
    -#                   .item
    -#                     = link_to({action: :destroy, strategic_lot_id: strategic_lot.id}, {title: 'Eliminar', method: :delete, data: { confirm: '¿Estás seguro?' }}) do
    -#                       %i.icofont-trash
    -#           .box-body#cows
    -#             = simple_form_for [:app, @farm, @assign], url: app_farm_strategic_lot_assign_cattle_path(@farm, strategic_lot) do |f|
    -#               .inputs
    -#                 = f.input :cow_id#, collection: @cows, label: false, input_html: { class: 'assignment_cow_id', onchange: 'validateCow()' }
    -#                 = f.input :strategic_lot_id, value: strategic_lot.id, as: :hidden
    -#               .button
    -#                 = f.submit :add, value: 'Agregar', id: 'add-cows', disabled: true
    -#           .box-body
    -#             .cows-list
    -#               - if strategic_lot.cows.blank?
    -#                 %center No hay ganado asignado
    -#               - else
    -#                 - strategic_lot.cows.each do |cow|
    -#                   .cow-item
    -#                     .cow-avatar= image_tag "/assets/keppler_cattle/#{cow.species}"
    -#                     .cow-name= cow.serie_number
    -#                     .cow-options
    -#                       = link_to({ controller: :cattle, action: :show, cow_id: cow.id }, { class: 'cow-option' }) do
    -#                         %i.icofont-eye
    -#                       = link_to({ action: :delete_assignment, strategic_lot_id: strategic_lot.id, cow_id: cow.id }, { method: :delete, class: 'cow-option', data: { confirm: t('keppler.messages.data_confirm') } }) do
    -#                         %i.icofont-trash
